(function(e){e.Variable=function(e,t,n){this.name=e,this.index=t,this.file=n};e.Variable.prototype={eval:function(t){var n,r,i=this.name;i.indexOf("@@")==0&&(i="@"+(new e.Variable(i.slice(1))).eval(t).value);if(this.evaluating)throw{type:"Name",message:"Recursive variable definition for "+i,filename:this.file,index:this.index};this.evaluating=!0;if(n=e.find(t.frames,function(e){if(r=e.variable(i))return r.value.eval(t)})){this.evaluating=!1;return n}throw{type:"Name",message:"variable "+i+" is undefined",filename:this.file,index:this.index}}}})(require("../tree"));